# Конфигурация бэкапа для rpi5-openwebui (V2.1)

# --- Основные настройки ---
PROJECT_NAME="rpi5-openwebui"
BACKUP_DIR="./backups"
RETENTION_DAYS=7

# --- Что бэкапим (Локальные файлы) ---
# Список локальных файлов и папок проекта (относительно корня проекта)
BACKUP_FILES=(
    ".env"
    "docker-compose.yml"
    "caddy/config"
    "openwebui/data"
    "searxng/config"
    "cli-proxy-api-plus/config"
)

# --- Что бэкапим (Docker Volumes) ---
# Список Docker volumes для бэкапа (вместо авто-обнаружения для стабильности)
BACKUP_VOLUMES=(
    "caddy_data"
    "caddy_config"
    "searxng_data"
    "valkey_data"
    "cli-proxy_auths"
    "ollama_data"
)

# Исключения для конкретных томов (например, тяжелые модели)
# Формат: "volume_name:path_to_exclude"
VOLUME_EXCLUDES=(
    "ollama_data:models"
)

# --- Удаленное хранилище (Rclone) ---
# Если пусто, удаленный бэкап отключен
# Пример: "gdrive:Backups/RPi5"
RCLONE_REMOTE=""

# --- Уведомления ---
ENABLE_NOTIFICATIONS=false

# --- Restic настройки ---
# Включить инкрементальные бэкапы с restic
ENABLE_RESTIC=true

# Путь к restic repository (рекомендуется на SSD!)
RESTIC_REPO_PATH="/backups/restic-repo"

# Retention policy (политика хранения снапшотов)
RESTIC_KEEP_DAILY=7      # Ежедневные снапшоты за 7 дней
RESTIC_KEEP_WEEKLY=4     # Еженедельные снапшоты за 4 недели
RESTIC_KEEP_MONTHLY=6    # Ежемесячные снапшоты за 6 месяцев
RESTIC_KEEP_YEARLY=2     # Годовые снапшоты за 2 года

# Останавливать контейнеры перед restic snapshot (для консистентности)
RESTIC_STOP_CONTAINERS=false

# Параллельные операции (ограничено для RPi5)
RESTIC_MAX_PARALLEL=2
